import{y as z,L as A,i as f,C as P,W as U,A as E,d as k,c as i,o as r,e as s,f as _,F as V,M as O,a as g,u as c,h as I,r as H,q as F,g as L,N,t as $,O as T,Q as W,b as D,P as q,n as b,w as S,_ as Q,p as X,k as Z,s as Y,I as G,l as J}from"./app-CRVfHUbl.js";import{_ as K}from"./index-Dd5QN_LQ.js";function x(){return{shortDate:o=>{const e=new Date(o),n=new Date().getTime()-e.getTime(),u=Math.floor(n/(1e3*60*60));if(u<1){const l=Math.floor(n/6e4);return l?`${l}m`:"Now"}return u<24?`${u}h`:u<168?`${Math.floor(u/24)}d`:e.toLocaleDateString("es",{month:"short",day:"numeric"})}}}function ee(a){const o=z(()=>A(a)),e=z(()=>{var n;return((n=o.value.children)==null?void 0:n.length)>0}),{shortDate:t}=x();return{rawComment:o,hasReplies:e,shortDate:t}}function oe(a,o){const e=f(!1),t=f(),n=P({comment:""});return{showReplyForm:e,commentMentionRef:t,replyForm:n,handleReplyClick:()=>{e.value=!e.value,e.value&&E(()=>{var d,h;const m=((d=a==null?void 0:a.commentator)==null?void 0:d.username)||"";m&&(n.comment=`@${m} `,(h=t.value)==null||h.focusTextarea())})},handleCancelClick:()=>{e.value=!1,n.reset()},submitReply:()=>{n.post(route("comments.replies.store",{comment:a.id}),{preserveScroll:!0,onSuccess:()=>{e.value=!1,n.reset(),U.reload({only:["comments"]})}})},deleteComment:m=>{confirm("Are you sure you want to delete this comment?")&&(U.delete(route("comments.destroy",{comment:m}),{preserveScroll:!0}),console.log(`Comentario con ID ${m} eliminado`))}}}const te=["aria-pressed"],se=["width","height"],ne={id:"vuesax_linear_message-add","data-name":"vuesax/linear/message-add",transform:"translate(-172 -378)"},re={id:"message-add"},le=["stroke"],ae=["stroke"],ie=["stroke"],ue=k({__name:"ReplyIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F4FFC7"},size:{default:"24px"}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",{class:"reply-icon",onMouseenter:t[0]||(t[0]=n=>o.value=!0),onMouseleave:t[1]||(t[1]=n=>o.value=!1),"aria-pressed":o.value},[(r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[s("g",ne,[s("g",re,[s("path",{id:"Vector",d:"M14,0H6Q0,0,0,6V19a1,1,0,0,0,1,1H14q6,0,6-6V6Q20,0,14,0Z",transform:"translate(174 380)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,le),s("path",{id:"Vector-2","data-name":"Vector",d:"M0,0H7",transform:"translate(180.5 390)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,ae),s("path",{id:"Vector-3","data-name":"Vector",d:"M0,7V0",transform:"translate(184 386.5)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,ie),t[2]||(t[2]=s("path",{id:"Vector-4","data-name":"Vector",d:"M0,0H24V24H0Z",transform:"translate(172 378)",fill:"none",opacity:"0"},null,-1))])])],8,se))],40,te))}}),de=["aria-pressed"],ce=["width","height"],me={id:"vuesax_linear_trash","data-name":"vuesax/linear/trash",transform:"translate(-108 -188)"},pe={id:"trash"},he=["stroke"],ve=["stroke"],fe=["stroke"],Ce=["stroke"],_e=["stroke"],ke=k({__name:"DeleteIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F83B3B"},size:{default:"24px"}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",{class:"delete-icon",onMouseenter:t[0]||(t[0]=n=>o.value=!0),onMouseleave:t[1]||(t[1]=n=>o.value=!1),"aria-pressed":o.value},[(r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",width:e.size,height:e.size,viewBox:"0 0 24 24"},[s("g",me,[s("g",pe,[s("path",{id:"Vector",d:"M18,.5C14.67.17,11.32,0,7.98,0A59.068,59.068,0,0,0,2.04.3L0,.5",transform:"translate(111 193.48)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,he),s("path",{id:"Vector-2","data-name":"Vector",d:"M0,2.97.22,1.66C.38.71.5,0,2.19,0H4.81C6.5,0,6.63.75,6.78,1.67L7,2.97",transform:"translate(116.5 190)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,ve),s("path",{id:"Vector-3","data-name":"Vector",d:"M13.7,0l-.65,10.07c-.11,1.57-.2,2.79-2.99,2.79H3.64C.85,12.86.76,11.64.65,10.07L0,0",transform:"translate(113.15 197.14)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,fe),s("path",{id:"Vector-4","data-name":"Vector",d:"M0,0H3.33",transform:"translate(118.33 204.5)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,Ce),s("path",{id:"Vector-5","data-name":"Vector",d:"M0,0H5",transform:"translate(117.5 200.5)",fill:"none",stroke:o.value?e.hoverColor:e.color,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5"},null,8,_e),t[2]||(t[2]=s("path",{id:"Vector-6","data-name":"Vector",d:"M0,0H24V24H0Z",transform:"translate(108 188)",fill:"none",opacity:"0"},null,-1))])])],8,ce))],40,de))}}),we=["aria-pressed"],ye=["fill","height","width"],ge=k({__name:"MoreVerticalIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F4FFC7"},viewBox:{},size:{default:"24px"}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",{class:"more-vertical-icon",onMouseenter:t[0]||(t[0]=n=>o.value=!0),onMouseleave:t[1]||(t[1]=n=>o.value=!1),"aria-pressed":o.value},[(r(),i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:o.value?e.hoverColor:e.color,viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",height:e.size,width:e.size},t[2]||(t[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 12.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5ZM12 18.75a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5Z"},null,-1)]),8,ye))],40,we))}}),$e={class:"report-icon"},be=["width","height","fill"],Me=["fill"],Re=["fill"],Ve=["fill"],Fe={id:"clip0_4418_7357"},De=["fill"],Le={key:0,class:"text-icon-report"},He=k({__name:"ReportIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F4FFC7"},viewBox:{},size:{default:"24px"},showText:{type:Boolean,default:!1}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",$e,[(r(),i("svg",{width:e.size,height:e.size,viewBox:"0 0 24 24",fill:o.value?e.hoverColor:e.color,xmlns:"http://www.w3.org/2000/svg"},[s("path",{d:"M12 14.75C11.59 14.75 11.25 14.41 11.25 14V9C11.25 8.59 11.59 8.25 12 8.25C12.41 8.25 12.75 8.59 12.75 9V14C12.75 14.41 12.41 14.75 12 14.75Z",fill:o.value?e.hoverColor:e.color},null,8,Me),s("path",{d:"M12 18.0005C11.94 18.0005 11.87 17.9905 11.8 17.9805C11.74 17.9705 11.68 17.9505 11.62 17.9205C11.56 17.9005 11.5 17.8705 11.44 17.8305C11.39 17.7905 11.34 17.7505 11.29 17.7105C11.11 17.5205 11 17.2605 11 17.0005C11 16.7405 11.11 16.4805 11.29 16.2905C11.34 16.2505 11.39 16.2105 11.44 16.1705C11.5 16.1305 11.56 16.1005 11.62 16.0805C11.68 16.0505 11.74 16.0305 11.8 16.0205C11.93 15.9905 12.07 15.9905 12.19 16.0205C12.26 16.0305 12.32 16.0505 12.38 16.0805C12.44 16.1005 12.5 16.1305 12.56 16.1705C12.61 16.2105 12.66 16.2505 12.71 16.2905C12.89 16.4805 13 16.7405 13 17.0005C13 17.2605 12.89 17.5205 12.71 17.7105C12.66 17.7505 12.61 17.7905 12.56 17.8305C12.5 17.8705 12.44 17.9005 12.38 17.9205C12.32 17.9505 12.26 17.9705 12.19 17.9805C12.13 17.9905 12.06 18.0005 12 18.0005Z",fill:o.value?e.hoverColor:e.color},null,8,Re),s("path",{d:"M18.06 22.1598H5.93998C3.98998 22.1598 2.49998 21.4498 1.73998 20.1698C0.989976 18.8898 1.08998 17.2398 2.03998 15.5298L8.09998 4.62984C9.09998 2.82984 10.48 1.83984 12 1.83984C13.52 1.83984 14.9 2.82984 15.9 4.62984L21.96 15.5398C22.91 17.2498 23.02 18.8898 22.26 20.1798C21.5 21.4498 20.01 22.1598 18.06 22.1598ZM12 3.33984C11.06 3.33984 10.14 4.05984 9.40998 5.35984L3.35998 16.2698C2.67998 17.4898 2.56998 18.6098 3.03998 19.4198C3.50998 20.2298 4.54998 20.6698 5.94998 20.6698H18.07C19.47 20.6698 20.5 20.2298 20.98 19.4198C21.46 18.6098 21.34 17.4998 20.66 16.2698L14.59 5.35984C13.86 4.05984 12.94 3.33984 12 3.33984Z",fill:o.value?e.hoverColor:e.color},null,8,Ve),s("defs",null,[s("clipPath",Fe,[s("rect",{width:"24",height:"24",fill:o.value?e.hoverColor:e.color},null,8,De)])])],8,be)),e.showText?(r(),i("span",Le,"Report")):_("",!0)]))}}),Be=["id"],Se={key:0,class:"report-success"},ze={key:1,class:"popover-report-card"},Ue={class:"reasons-label"},Pe=["value"],Ie={key:0,class:"clr-error-100"},Te={key:1},Ae={key:0,class:"clr-error-100 fs-300 padding-block-2"},Ee=k({inheritAttrs:!1,__name:"ReportModal",props:{reportable:{},popoverId:{},showText:{type:Boolean}},setup(a){const o=a,e={sexual:"Sexual content",hate:"Hate speech or incitement",abuse:"Abusive or hateful content",harassment:"Harassment or bullying",misleading:"Misleading information",other:"Other"},t=P({reason:null,message:"",reportable_id:o.reportable.id,reportable_type:o.reportable.type}),n=f(!1),u=f({});function l(){if(!t.reason){u.value.reason="Please specify a reason for this report.";return}if(t.reason==="other"&&!t.message.trim()){u.value.message='Please add a comment to the report if your choice is "other".';return}t.post("/report",{onSuccess:()=>{n.value=!0},onError:m=>{}})}const p=f(null);function v(){const m=p.value;if(!m){console.warn(`No se encontró el dialog con id ${o.popoverId}`);return}"showPopover"in m?m.showPopover():"showModal"in m?m.showModal():console.warn("Your browser doesn't support showPopover or showModal. Please send us an email to: admin@sickofmetal.net to review your concerns.")}return(m,d)=>(r(),i(V,null,[s("div",O(m.$attrs,{style:{display:"flex"}}),[g(He,{onClick:v,disabled:c(t).processing,showText:m.showText},null,8,["disabled","showText"])],16),s("section",null,[s("dialog",{class:"report-popover",ref_key:"dialogRef",ref:p,popover:"",id:m.popoverId},[n.value?(r(),i("div",Se,d[2]||(d[2]=[s("h2",{class:"heading-4"},"Thank you.",-1),s("p",null,"We'll get back to you if neccessary. Click/tap outside or press ESC to close.",-1)]))):(r(),i("article",ze,[s("form",{onSubmit:I(l,["prevent"]),class:"form-report-card"},[d[3]||(d[3]=s("h2",{class:"header"},"What's wrong?",-1)),(r(),i(V,null,H(e,(h,C)=>s("div",{key:C,class:"reasons-container"},[s("label",Ue,[F(s("input",{type:"radio",value:C,"onUpdate:modelValue":d[0]||(d[0]=w=>c(t).reason=w),class:"custom-radio"},null,8,Pe),[[N,c(t).reason]]),L(" "+$(h),1)])])),64)),u.value.reason?(r(),i("p",Ie,$(u.value.reason),1)):_("",!0),c(t).reason==="other"?(r(),i("div",Te,[F(s("textarea",{"onUpdate:modelValue":d[1]||(d[1]=h=>c(t).message=h),placeholder:"Additional comment",class:"textarea"},null,512),[[T,c(t).message]]),u.value.message?(r(),i("p",Ae,$(u.value.message),1)):_("",!0)])):_("",!0),d[4]||(d[4]=s("button",{class:"button",type:"submit"},"Submit report",-1))],32),d[5]||(d[5]=s("p",{style:{"font-size":"14px"},class:"margin-inline-start-6 padding-block-end-4 clr-neutral-300"},"Click/tap outside to close",-1))]))],8,Be)])],64))}}),Ze=["id"],je={class:"comment"},Oe={class:"comment__body"},Ne={class:"user"},We={class:"user__date"},qe={class:"comment"},Qe=["onClick"],Xe={key:1},Ye=k({__name:"CommentReplyContent",props:{post:{},comment:{},rawComment:{},shortDate:{type:Function},authUser:{}},emits:["reply-click","delete-comment"],setup(a,{emit:o}){const e=a,t=o,n=f(!1),u=z(()=>{var l,p;return((l=e.comment.commentator)==null?void 0:l.id)===((p=e.comment.commentable)==null?void 0:p.user_id)});return(l,p)=>{var m,d,h,C;const v=W("click-away");return r(),i("section",{class:"comment-content",id:`comment-${l.comment.id}`},[s("header",je,[g(K,{class:"comment__avatar",size:"md",src:(m=l.comment.commentator)==null?void 0:m.avatar_url,alt:((d=l.comment.commentator)==null?void 0:d.username)||"Rattlehead"},null,8,["src","alt"]),s("article",Oe,[s("div",Ne,[(h=l.comment.commentator)!=null&&h.username?(r(),D(c(q),{key:0,href:l.route("author.posts",{user:l.comment.commentator.username}),class:b(["user__author no-decor",{"post-author":u.value}])},{default:S(()=>{var w,y;return[L($(((y=(w=l.comment)==null?void 0:w.commentator)==null?void 0:y.username)||"Rattlehead"),1)]}),_:1},8,["href","class"])):_("",!0),s("p",We,$(l.shortDate((C=l.comment)==null?void 0:C.created_at)),1)]),s("p",qe,$(l.rawComment.comment),1)])]),l.authUser?F((r(),D(Q,{key:0,class:"comment-content__actions",modelValue:n.value,"onUpdate:modelValue":p[2]||(p[2]=w=>n.value=w)},{header:S(({isOpen:w,toggle:y})=>[s("span",{onClick:I(y,["stop"])},[g(ge)],8,Qe)]),content:S(()=>{var w,y,R;return[l.authUser&&l.authUser.id!==((w=l.comment)==null?void 0:w.user_id)?(r(),i("div",{key:0,onClick:p[0]||(p[0]=M=>t("reply-click"))},[s("p",null,[g(ue,{size:"20",hoverColor:"#D3D7EA"}),p[3]||(p[3]=L(" Reply "))])])):_("",!0),l.authUser&&l.authUser.id!==((y=l.comment)==null?void 0:y.user_id)?(r(),i("div",Xe,[g(Ee,{showText:"",class:"report-comment",reportable:{id:l.comment.id,type:"comment"},popoverId:`reportPopover-comment-${l.comment.id}`},null,8,["reportable","popoverId"])])):_("",!0),l.authUser&&l.authUser.id===((R=l.comment)==null?void 0:R.user_id)?(r(),i("div",{key:2,onClick:p[1]||(p[1]=M=>{var B;return t("delete-comment",(B=l.comment)==null?void 0:B.id)})},[s("p",null,[g(ke,{size:"20",hoverColor:"#D3D7EA"}),p[4]||(p[4]=L(" Delete "))])])):_("",!0)]}),_:1},8,["modelValue"])),[[v,()=>n.value=!1]]):_("",!0)],8,Ze)}}});function Ge(a=""){const o=f(a),e=f(null),t=f(!1),n=f([]),u=f("");return{text:o,textareaRef:e,showSuggestions:t,filteredUsers:n,focusTextarea:()=>{e.value&&(e.value.focus(),e.value.setSelectionRange(e.value.value.length,e.value.value.length))},updateValue:d=>{o.value=d},handleInput:d=>{if(!d||d.length===0){t.value=!1;return}const h=o.value.split(/\s+/);if(u.value=h[h.length-1],u.value.startsWith("@")){const C=u.value.slice(1).toLowerCase();n.value=d.filter(w=>w.username.toLowerCase().includes(C)),t.value=n.value.length>0}else t.value=!1},selectMention:d=>{const h=o.value.split(/\s+/);h[h.length-1]=`@${d}`,o.value=h.join(" ")+" ",t.value=!1}}}const Je={class:"suggestions-wrapper"},Ke={key:0,class:"suggestions"},xe=["onClick"],eo=k({__name:"CommentMention",props:{users:{},modelValue:{}},emits:["update:modelValue"],setup(a,{expose:o,emit:e}){const t=a,n=e,{text:u,textareaRef:l,focusTextarea:p,showSuggestions:v,filteredUsers:m,handleInput:d,selectMention:h,updateValue:C}=Ge(t.modelValue);X(()=>t.modelValue,y=>{y!==u.value&&C(y)});const w=()=>{n("update:modelValue",u.value),d(t.users)};return o({focusTextarea:p}),Z(()=>{p()}),(y,R)=>(r(),i("div",Je,[F(s("textarea",{ref_key:"textareaRef",ref:l,"onUpdate:modelValue":R[0]||(R[0]=M=>Y(u)?u.value=M:null),onInput:w,class:"textarea","data-type":"reply-box",placeholder:"Use '@' to mention somebody"},null,544),[[T,c(u)]]),c(v)&&c(m).length>0?(r(),i("ul",Ke,[(r(!0),i(V,null,H(c(m),M=>(r(),i("li",{key:M.id,onClick:B=>c(h)(M.username),class:"suggestions__item"},$(M.username),9,xe))),128))])):_("",!0)]))}}),oo={class:"comment-replies"},to={key:0,class:"reply-form"},so={class:"flex-group"},no=["disabled"],ro={key:1,class:"replies"},lo=k({__name:"CommentReplyReplies",props:{showReplyForm:{type:Boolean},replyForm:{},users:{},hasReplies:{type:Boolean},replies:{},depth:{default:0},commentMentionRef:{}},emits:["submit-reply","cancel-click"],setup(a,{emit:o}){const e=o,t=f(null);return(n,u)=>(r(),i("div",oo,[n.showReplyForm?(r(),i("div",to,[g(eo,{class:"comment-suggestion",row:"2",users:n.users,modelValue:n.replyForm.comment,"onUpdate:modelValue":u[0]||(u[0]=l=>n.replyForm.comment=l),ref_key:"commentMentionRef",ref:t},null,8,["users","modelValue"]),s("div",so,[s("button",{onClick:u[1]||(u[1]=l=>e("submit-reply")),disabled:n.replyForm.processing,class:"button","data-type":"reply-btn"}," Submit ",8,no),s("button",{type:"button",class:"button clr-primary-100","data-type":"ghost",onClick:u[2]||(u[2]=l=>e("cancel-click"))}," Cancel ")])])):_("",!0),n.hasReplies?(r(),i("div",ro,[(r(!0),i(V,null,H(n.replies,l=>(r(),D(j,{key:l.id,comment:l,depth:n.depth+1,users:n.users},null,8,["comment","depth","users"]))),128))])):_("",!0)]))}}),j=k({__name:"CommentReply",props:{comment:{},depth:{},isFirstLevel:{type:Boolean},isRoot:{type:Boolean},users:{},post:{}},setup(a){const o=a,{showReplyForm:e,replyForm:t,commentMentionRef:n,handleReplyClick:u,handleCancelClick:l,submitReply:p,deleteComment:v}=oe(o.comment,o.users),{rawComment:m,hasReplies:d,shortDate:h}=ee(o.comment);return(C,w)=>(r(),i("div",{class:b(["comment-container",{"first-level":C.isFirstLevel}])},[s("div",{class:b(["comment-wrapper",{"is-root":C.isRoot}])},[g(Ye,{post:C.post,comment:C.comment,rawComment:c(m),shortDate:c(h),authUser:C.$page.props.auth.user,isReplying:c(e),onReplyClick:c(u),onDeleteComment:c(v)},null,8,["post","comment","rawComment","shortDate","authUser","isReplying","onReplyClick","onDeleteComment"]),c(e)||c(d)?(r(),D(lo,{key:0,showReplyForm:c(e),replyForm:c(t),replies:C.comment.children,users:C.users,hasReplies:c(d),depth:C.depth,commentMentionRef:c(n),onSubmitReply:c(p),onCancelClick:c(l)},null,8,["showReplyForm","replyForm","replies","users","hasReplies","depth","commentMentionRef","onSubmitReply","onCancelClick"])):_("",!0)],2)],2))}}),ao={key:0,class:"blog-post__comments__thread"},Io=k({__name:"CommentBox",props:{post:{},depth:{},comments:{},users:{}},setup(a){return Z(()=>{const o=window.location.hash;o.startsWith("#comment-")&&setTimeout(()=>{const e=document.querySelector(o);if(!e){console.warn("❌ No comment found on DOM:",o);return}e.scrollIntoView({behavior:"smooth",block:"start"}),e.classList.add("highlighted-comment"),setTimeout(()=>{e.classList.remove("highlighted-comment")},2500)},100)}),(o,e)=>{var t;return(t=o.comments)!=null&&t.length?(r(),i("div",ao,[(r(!0),i(V,null,H(o.comments,n=>(r(),D(j,{key:n.id,comment:A(n),depth:0,"is-root":!0,users:o.users,post:o.post},null,8,["comment","users","post"]))),128))])):_("",!0)}}}),io={key:0,style:{color:"crimson","font-size":"16px"}},uo={type:"submit",class:"button","data-type":"comment"},co=["disabled"],mo={key:1},To=k({__name:"CommentForm",props:{post:Object},setup(a){const o=P({comment:""}),e=()=>{o.post(route("posts.comments.store",{post:a.post}),{preserveScroll:!0,onSuccess:()=>o.reset(),onError:()=>{var t;o.errors.comment&&((t=document.getElementById("comment"))==null||t.focus())}})};return(t,n)=>(r(),i("form",{class:"blog-post__comments__form | flow",onSubmit:I(e,["prevent"])},[n[1]||(n[1]=s("label",{for:"comments",class:"uppercase clr-secondary-100"},"comments",-1)),F(s("textarea",{"onUpdate:modelValue":n[0]||(n[0]=u=>c(o).comment=u),id:"comment",name:"comment",rows:"4",placeholder:"What's on your mind?",class:b(["textarea",{"is-invalid":c(o).errors.comment}])},null,2),[[T,c(o).comment]]),c(o).errors.comment?(r(),i("div",io,$(c(o).errors.comment),1)):_("",!0),s("button",uo,[c(o).processing?(r(),i("span",{key:0,disabled:c(o).processing}," Posting...",8,co)):(r(),i("span",mo,"post comment"))])],32))}}),po={class:"like-button-wrapper"},ho=["aria-label"],Ao=k({__name:"LikeButton",props:{post:{type:Object,required:!0},variant:{type:String,default:"default",validator:a=>["default","mobile"].includes(a)}},emits:["update:post"],setup(a,{emit:o}){const e=a,t=o,n=f(!1),u=f(!1),l=G(),p=async v=>{if(!l.props.auth.user){U.visit(route("register"));return}v.preventDefault();const m=e.post.is_liked_by_user;n.value=!1,u.value=!1,await E(),n.value=!0,u.value=!0;const d={...e.post,is_liked_by_user:!m,likes_count:m?e.post.likes_count-1:e.post.likes_count+1};t("update:post",d);try{const h=await J[m?"delete":"post"](m?route("posts.unlike",e.post.id):route("posts.like",e.post.id));h.data.success&&t("update:post",{...d,likes_count:h.data.likes_count,is_liked_by_user:h.data.is_liked_by_user})}catch(h){t("update:post",e.post),console.error("Error:",h)}};return(v,m)=>(r(),i("div",po,[s("button",{onClick:m[0]||(m[0]=d=>p(d)),class:b([{"like-button--active":a.post.is_liked_by_user,"like-button--inactive":!a.post.is_liked_by_user,[`like-button--${a.variant}`]:a.variant},"button"]),"aria-label":a.post.is_liked_by_user?"Unlike":"Like","data-type":"like"},[(r(),i("span",{key:"count-"+a.post.likes_count+u.value,class:b(["like-count",{animating:u.value}])},$(a.post.likes_count),3)),(r(),i("svg",{key:"icon-"+a.post.is_liked_by_user+n.value,class:b({"pulse-animation":n.value}),xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"30",height:"30",viewBox:"0 0 34 34"},m[1]||(m[1]=[s("path",{d:"M24 6c-1.7 0-3 1.3-3 3v2.2c-.3-.1-.6-.2-1-.2-.8 0-1.5.3-2 .8-.5-.5-1.2-.8-2-.8-.4 0-.7.1-1 .2V7c0-1.7-1.3-3-3-3S9 5.3 9 7v10.9c-.5-.5-1.2-.9-2-.9-.9 0-1.7.3-2.3.9-1.1 1.1-1.2 3-.1 4.2l3.2 3.6C9.6 27.8 12.2 29 15 29h3.7c4.6 0 8.4-3.8 8.4-8.4V9C27 7.3 25.7 6 24 6zm1 10v4.6c0 3.5-2.9 6.4-6.4 6.4h-3.7c-2.2 0-4.2-.9-5.7-2.6L6 20.8c-.4-.4-.4-1.1.1-1.5.2-.2.5-.3.8-.3.3 0 .6.2.8.4l1.5 1.8c.3.3.7.4 1.1.3.4-.1.7-.5.7-.9V7c0-.6.4-1 1-1s1 .4 1 1v8c0 .6.4 1 1 1s1-.4 1-1v-1c0-.6.4-1 1-1s1 .4 1 1v1c0 .6.4 1 1 1s1-.4 1-1v-1c0-.6.4-1 1-1s1 .4 1 1v1c0 .6.4 1 1 1s1-.4 1-1V9c0-.6.4-1 1-1s1 .4 1 1v7z"},null,-1)]),2))],10,ho)]))}});function vo(a,o="",e=""){const t=f(!1);async function n(){try{await navigator.clipboard.writeText(a),alert("Copied to clipboard")}catch{alert("Failed to copy link.")}}async function u(){if(navigator.share)try{await navigator.share({title:o,text:e,url:a})}catch{}else n()}function l(v){window.open(v,"_blank","noopener,noreferrer")}function p(){const v=encodeURIComponent(a),m=/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent),d=`https://www.facebook.com/sharer/sharer.php?u=${v}`;window.open(d,"_blank","noopener,noreferrer"),console.log(`Compartiendo ${d} en Facebook desde ${m?"móvil":"escritorio"}`)}return{showMenu:t,copyLink:n,share:u,openShare:l,shareOnFacebook:p}}const fo=["aria-pressed"],Co=["fill"],_o={"clip-path":"url(#clip0_4418_6693)"},ko=["fill"],wo={id:"clip0_4418_6693"},yo=["fill"],go=k({__name:"ShareIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F4FFC7"},viewBox:{default:"0 4 24 24"},size:{default:"24px"}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",{class:"share-icon",onMouseenter:t[0]||(t[0]=n=>o.value=!0),onMouseleave:t[1]||(t[1]=n=>o.value=!1),"aria-pressed":o.value},[(r(),i("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:o.value?e.hoverColor:e.color,xmlns:"http://www.w3.org/2000/svg"},[s("g",_o,[t[2]||(t[2]=s("path",{d:"M12.5002 14.75H10.0002C9.59024 14.75 9.25024 14.41 9.25024 14C9.25024 13.59 9.59024 13.25 10.0002 13.25H12.5002C15.1202 13.25 17.2502 11.12 17.2502 8.5C17.2502 5.88 15.1202 3.75 12.5002 3.75H7.50024C4.88024 3.75 2.75024 5.88 2.75024 8.5C2.75024 9.6 3.14023 10.67 3.84023 11.52C4.10023 11.84 4.06023 12.31 3.74023 12.58C3.42023 12.84 2.95024 12.8 2.68024 12.48C1.75024 11.36 1.24023 9.95 1.24023 8.5C1.24023 5.05 4.04023 2.25 7.49023 2.25H12.4902C15.9402 2.25 18.7402 5.05 18.7402 8.5C18.7402 11.95 15.9502 14.75 12.5002 14.75Z",fill:"white",style:{fill:"var(--fillg)"}},null,-1)),s("path",{d:"M16.5 21.75H11.5C8.05 21.75 5.25 18.95 5.25 15.5C5.25 12.05 8.05 9.25 11.5 9.25H14C14.41 9.25 14.75 9.59 14.75 10C14.75 10.41 14.41 10.75 14 10.75H11.5C8.88 10.75 6.75 12.88 6.75 15.5C6.75 18.12 8.88 20.25 11.5 20.25H16.5C19.12 20.25 21.25 18.12 21.25 15.5C21.25 14.4 20.86 13.33 20.16 12.48C19.9 12.16 19.94 11.69 20.26 11.42C20.58 11.15 21.05 11.2 21.32 11.52C22.25 12.64 22.76 14.05 22.76 15.5C22.75 18.95 19.95 21.75 16.5 21.75Z",fill:o.value?e.hoverColor:e.color},null,8,ko)]),s("defs",null,[s("clipPath",wo,[s("rect",{width:"24",height:"24",fill:o.value?e.hoverColor:e.color},null,8,yo)])])],8,Co))],40,fo))}}),$o=["aria-pressed"],bo=["width","height","fill"],Mo={"clip-path":"url(#clip0_4418_9011)"},Ro=["fill"],Vo={id:"clip0_4418_9011"},Fo=["fill"],Do=k({__name:"FacebookIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F4FFC7"},viewBox:{},size:{default:"24px"}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",{class:"facebook-icon",onMouseenter:t[0]||(t[0]=n=>o.value=!0),onMouseleave:t[1]||(t[1]=n=>o.value=!1),"aria-pressed":o.value},[(r(),i("svg",{width:e.size,height:e.size,viewBox:"0 0 24 24",fill:o.value?e.hoverColor:e.color,xmlns:"http://www.w3.org/2000/svg"},[s("g",Mo,[s("path",{d:"M22 16.19C22 19.83 19.83 22 16.19 22H15C14.45 22 14 21.55 14 21V15.23C14 14.96 14.22 14.73 14.49 14.73L16.25 14.7C16.39 14.69 16.51 14.59 16.54 14.45L16.89 12.54C16.92 12.36 16.78 12.19 16.59 12.19L14.46 12.22C14.18 12.22 13.96 12 13.95 11.73L13.91 9.28C13.91 9.12 14.04 8.98001 14.21 8.98001L16.61 8.94C16.78 8.94 16.91 8.81001 16.91 8.64001L16.87 6.23999C16.87 6.06999 16.74 5.94 16.57 5.94L13.87 5.98001C12.21 6.01001 10.89 7.37 10.92 9.03L10.97 11.78C10.98 12.06 10.76 12.28 10.48 12.29L9.28 12.31C9.11 12.31 8.98001 12.44 8.98001 12.61L9.01001 14.51C9.01001 14.68 9.14 14.81 9.31 14.81L10.51 14.79C10.79 14.79 11.01 15.01 11.02 15.28L11.11 20.98C11.12 21.54 10.67 22 10.11 22H7.81C4.17 22 2 19.83 2 16.18V7.81C2 4.17 4.17 2 7.81 2H16.19C19.83 2 22 4.17 22 7.81V16.19Z",fill:o.value?e.hoverColor:e.color},null,8,Ro)]),s("defs",null,[s("clipPath",Vo,[s("rect",{width:"24",height:"24",fill:o.value?e.hoverColor:e.color},null,8,Fo)])])],8,bo))],40,$o))}}),Lo=["aria-pressed"],Ho={xmlns:"http://www.w3.org/2000/svg",width:"16.017",height:"16.469",viewBox:"0 0 16.017 16.469"},Bo=["fill"],So=k({__name:"XIcon",props:{color:{default:"#D3D7EA"},hoverColor:{default:"#F4FFC7"},viewBox:{},size:{default:"24px"}},setup(a){const o=f(!1);return(e,t)=>(r(),i("button",{class:"x-icon",onMouseenter:t[0]||(t[0]=n=>o.value=!0),onMouseleave:t[1]||(t[1]=n=>o.value=!1),"aria-pressed":o.value},[(r(),i("svg",Ho,[s("path",{id:"Path_25","data-name":"Path 25",d:"M465.794,1087.5h1.371l-5.966,6.958,6.506,9.511h-4.741l-4.405-6.433-5.514,6.433h-1.357l6.273-7.323L451.7,1087.5h4.741l4.157,6.068Zm-12.151,1.05h2.144l9.978,14.369H463.62Z",transform:"translate(-451.688 -1087.5)",fill:o.value?e.hoverColor:e.color,"fill-rule":"evenodd"},null,8,Bo)]))],40,Lo))}}),zo={class:"share-wrapper"},Eo=k({__name:"ShareMenu",props:{url:{},variant:{}},setup(a){const o=a,{showMenu:e,copyLink:t,openShare:n,shareOnFacebook:u}=vo(o.url);return(l,p)=>(r(),i("article",zo,[g(go,{color:"#fff",onClick:p[0]||(p[0]=v=>e.value=!c(e))}),c(e)?(r(),i("div",{key:0,class:b(["share-menu",`share-menu--${l.variant}`])},[s("div",{class:"button fw-semi-bold underline","data-type":"ghost",onClick:p[1]||(p[1]=(...v)=>c(t)&&c(t)(...v)),style:{"text-transform":"uppercase"}},"link"),s("div",{class:"button","data-type":"ghost",onClick:p[2]||(p[2]=v=>c(u)())},[g(Do)]),s("div",{class:"button","data-type":"ghost",onClick:p[3]||(p[3]=v=>c(n)(`https://twitter.com/intent/tweet?url=${encodeURIComponent(o.url)}`))},[g(So)])],2)):_("",!0)]))}});export{Ao as _,Eo as a,Ee as b,To as c,Io as d};
